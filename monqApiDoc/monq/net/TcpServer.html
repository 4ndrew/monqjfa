<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="de">
<head>
<!-- Generated by javadoc (version 1.7.0_91) on Sun Dec 27 16:47:46 CET 2015 -->
<title>TcpServer (monq packages)</title>
<meta name="date" content="2015-12-27">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TcpServer (monq packages)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TcpServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><em>monq-1.7.1</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../monq/net/ServiceUnavailException.html" title="class in monq.net"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?monq/net/TcpServer.html" target="_top">Frames</a></li>
<li><a href="TcpServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">monq.net</div>
<h2 title="Class TcpServer" class="title">Class TcpServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>monq.net.TcpServer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">TcpServer</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">a simple socket server able to serve multiple client
 connections in parallel. Using this class make sense, if the
 service to be provided can be coded as a transformation of data
 read from an <code>java.io.InputStream</code> and then written to a
 <code>java.io.OutputStream</code>. To be able to serve several
 clients in parallel, a new service object is needed for every
 connection. Therefore the constructor has a
 <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net"><code>ServiceFactory</code></a> as a parameter rather than a service
 object.</p>

 <p>A typical use of this class involves the following steps:
 <ol>
 <li>Write a class implementing <code>java.lang.Runnable</code>.
 Its <code>run()</code> method should read input from an
 <code>InputStream</code>, transform it
 and write the result to an <code>OutputStream</code>.</li>
 <li>Write a class implementing a
 <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net"><code>ServiceFactory</code></a> to
 return instances of the above class.</li>
 <li>Create a <code>TcpServer</code> with the factory.</li>
 <li>Call the <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a> method of the
 <code>TcpServer</code>.</li>
 </ol>
 If you stick your <code>ServiceFactory</code> into a <a href="../../monq/net/FilterServiceFactory.html" title="class in monq.net"><code>FilterServiceFactory</code></a> between steps 2 and 3 and pass the result to the
 <code>TcpServer</code>, you get a pipe filter which can be used in
 conjunction with other pipe filters and with <a href="../../monq/net/DistPipeFilter.html" title="class in monq.net"><code>DistPipeFilter</code></a>
 to built a distributed pipe on the network.
 </p>

 <p>As soon as clients contact the server, it will call the factory
 method to fetch a new service instance. It connects it to the input
 and output stream from the client, wraps it up in a
 <code>Thread</code> and starts it. By default 10 such service
 threads can be running in parallel. When a thread finishes,
 <code>TcpServer</code> takes care to close the streams.</p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>&copy; 2004 Harald Kirsch</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../monq/net/TcpServer.html#TcpServer(int,%20monq.net.ServiceFactory)">TcpServer</a></strong>(int&nbsp;port,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac)</code>
<div class="block">creates a server to listen on the given port.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../monq/net/TcpServer.html#TcpServer(int,%20monq.net.ServiceFactory,%20int)">TcpServer</a></strong>(int&nbsp;port,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac,
         int&nbsp;slots)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../monq/net/TcpServer.html#TcpServer(java.net.ServerSocket,%20monq.net.ServiceFactory,%20int)">TcpServer</a></strong>(java.net.ServerSocket&nbsp;s,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac,
         int&nbsp;slots)</code>
<div class="block">creates a server to listen on the given socket.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#run()">run</a></strong>()</code>
<div class="block">calls <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a> and catches exceptions to write them to the
 log.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#serve()">serve</a></strong>()</code>
<div class="block">starts the server, waiting for connections and serving up to
 <em>n</em> requests in parallel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../monq/net/TcpServer.html" title="class in monq.net">TcpServer</a></code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#setDebug()">setDebug</a></strong>()</code>
<div class="block">given that logging was enabled with <a href="../../monq/net/TcpServer.html#setLogging(java.io.PrintStream)"><code>setLogging()</code></a>, we now switch to really verbose logging.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../monq/net/TcpServer.html" title="class in monq.net">TcpServer</a></code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#setLogging(java.io.PrintStream)">setLogging</a></strong>(java.io.PrintStream&nbsp;log)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">closes the socket on which the server is accepting connections
 with the effect, that <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a> immediately returns.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../monq/net/TcpServer.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TcpServer(java.net.ServerSocket, monq.net.ServiceFactory, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TcpServer</h4>
<pre>public&nbsp;TcpServer(java.net.ServerSocket&nbsp;s,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac,
         int&nbsp;slots)</pre>
<div class="block"><p>creates a server to listen on the given socket. Connection
 request are honoured with whatever service the given <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net"><code>ServiceFactory</code></a> delivers. Up to <code>slots</code> services are
 run in parallel. If all slots are filled, incoming requests are
 put on hold by the underlying tcp machinery.</p>

 <p><b>Important:</b> The services created by <code>fac</code>
 should <b>not</b> close the input and output stream passed to
 them. If they close one of them, this immediately closes the
 socket and thereby the other one too. Both streams are close by
 the server itself after the service thread finishes.</p></div>
</li>
</ul>
<a name="TcpServer(int, monq.net.ServiceFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TcpServer</h4>
<pre>public&nbsp;TcpServer(int&nbsp;port,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac)
          throws java.io.IOException</pre>
<div class="block"><p>creates a server to listen on the given port. Up to 10
 connections are serviced in parallel.</p></div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if no server socket can be opened for the
 given port.</dd></dl>
</li>
</ul>
<a name="TcpServer(int, monq.net.ServiceFactory, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TcpServer</h4>
<pre>public&nbsp;TcpServer(int&nbsp;port,
         <a href="../../monq/net/ServiceFactory.html" title="interface in monq.net">ServiceFactory</a>&nbsp;fac,
         int&nbsp;slots)
          throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setLogging(java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLogging</h4>
<pre>public&nbsp;<a href="../../monq/net/TcpServer.html" title="class in monq.net">TcpServer</a>&nbsp;setLogging(java.io.PrintStream&nbsp;log)</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>this</dd></dl>
</li>
</ul>
<a name="setDebug()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public&nbsp;<a href="../../monq/net/TcpServer.html" title="class in monq.net">TcpServer</a>&nbsp;setDebug()</pre>
<div class="block"><p>given that logging was enabled with <a href="../../monq/net/TcpServer.html#setLogging(java.io.PrintStream)"><code>setLogging()</code></a>, we now switch to really verbose logging.</p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>this</dd></dl>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block"><p>calls <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a> and catches exceptions to write them to the
 log. This method is only here so that a <code>TcpServer</code>
 itself can be put into a <code>Thread</code>. If the server
 activity is anyway the main operation of your program, just call
 <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a>.</p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block"><p>closes the socket on which the server is accepting connections
 with the effect, that <a href="../../monq/net/TcpServer.html#serve()"><code>serve()</code></a> immediately returns. Any
 currently running service threads are not affected.</p></div>
</li>
</ul>
<a name="serve()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serve</h4>
<pre>public&nbsp;void&nbsp;serve()
           throws java.io.IOException</pre>
<div class="block"><p>starts the server, waiting for connections and serving up to
 <em>n</em> requests in parallel. The value <em>n</em> is the
 number of slots defined in the constructor. This method only
 returns if the current thread's <code>interrupt()</code> method
 is called. Note, however, that services not yet finished are just
 left running. They are not forcibly shut down.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TcpServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
<div class="aboutLanguage"><em>monq-1.7.1</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../monq/net/ServiceUnavailException.html" title="class in monq.net"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?monq/net/TcpServer.html" target="_top">Frames</a></li>
<li><a href="TcpServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><div class="monqlink">download: <a href='https://pifpafpuf.de/Monq.jfa/download' target='_top'>pifpafpuf.de</a><br/>home page: <a href="http://pifpafpuf.de/Monq.jfa/" target='_top'>pifpafpuf.de/Monq.jfa</a></div></small></p>
</body>
</html>
